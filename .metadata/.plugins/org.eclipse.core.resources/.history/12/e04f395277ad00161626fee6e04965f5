package webshop;


import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;

public class JDBCClient {

	Connection con;
	
	JDBCClient() throws SQLException{
		this.con = DriverManager.getConnection("jdbc:postgresql://localhost:5432/webshop","test","test");
	}
	
	List<Artikel> getAllArticles() throws SQLException {
		PreparedStatement pstmt = con.prepareStatement("SELECT * FROM artikel");
		ResultSet rs = pstmt.executeQuery();
		
		ArrayList<Artikel> rl = new ArrayList<>();
		//int anr, String abez, String ainfo, Float preis, int vstueckz
		while(rs.next()){
			int anr = rs.getInt("anr");
			String abez = rs.getString("abez");
			String ainfo = rs.getString("info");
			Float preis = rs.getFloat("npreis");
			int vstueckz = rs.getInt("vstueckz");
			rl.add(new Artikel(anr,abez,ainfo,preis,vstueckz));
		}
		return rl;
	}

	void addArticle(Artikel a) {
		PreparedStatement stmt2 = con.prepareStatement();
        String query2 = "insert into artikel(anr,abez,npreis,vstueckz,info) values(1203123123,'test',2,2,'das ist ein test')";
        stmt2.executeUpdate(query2); // update heißt Query ohne Rückgabe
	}
	
	void saveArticle(Artikel a) {
	}
}
